# The New Homelabber's Guide to Buying Used Gear
**or How to Not be Sad About your "New" Hardware**, by /u/wolffstarr

*Special thanks to /u/nereme for the original suggestion of a Buyer's Guide thread, and /u/synk2 for the suggestion that it be what NOT to buy.*

So, you're getting into Homelab and maybe you got some equipment left over from an upgrade at work, or that a friend gave you, or you found something at a flea market somewhere and it piqued your interests. You've been playing with it, but you want more. More power, more hardware, more whatever - doesn't really matter what, just more. Welcome to the Addiction, kids. 

I can hear you shouting **"EBAY HO!!! BUY ALL THE THINGS!!!"** from here. Slow down there soldier. This is a really, REALLY great way to spend a whole lot of money on a stack of stuff that is worth more to a scrapyard than your homelab ambitions. There is an absolute TON of enterprise gear out there, ready for the taking, but you need to do your due diligence, or you won't get the GOOD things. You'll end up with something like a Cisco 2501 router, where the two "ethernet ports" are actually serial ports, and you need adapters for the funky looking serial connectors to get Ethernet. It's a bad scene when that happens, so we're here to try and mitigate this.

**************************************************************

## Part 0: You Don't Have To Buy Anything to Get Going

Keep this firmly in mind on your read-through of this post, that this is oriented to someone who's already started labbing things but wants to up their gear to do more with and doesn't know where to start. I think the vast majority of us all started with an old PC or the leftover parts from the last time they upgraded or built a new machine, or maybe that box that your parents/aunt/grandma doesn't need anymore now that she's got her new birthday/Christmas/whatever present, and you volunteer to take it and clean it for them. (Got a server using a hard drive like that right now that's running. My original NAS, as it happens.)

I'd be very surprised if you're not already sitting on a pile of old parts in some way, shape, or form - if you weren't the kind to collect parts you probably wouldn't be labbing - but even if you're not, if all you have is one PC, use it. These days we have VirtualBox, which does a fine job of running just about everything you might want to try out. It might be a bit slow, but you can get started while you wait for your tax return/birthday money/lottery winnings to get here.

The key point is, nothing about ANYTHING we do with a homelab requires enterprise hardware to begin learning, except learning how enterprise hardware is laid out. That has it's uses, but most of it you can still get from building your own PC. Coding, Linux, FreeBSD, Win 2012 R2, containers, hypervisors, networking, storage - all of it  can be done with a reasonably recent laptop or desktop.

**************************************************************

## Part 1: Do Your Own Research

This can't be overstated. You can't come asking the subreddit daily what items are good for which; I mean, you *can*, but you won't like the result after a few weeks. So best to learn the tools to do so now. They are as follows:

1. **Search Is Your Friend.** Try the same search subject multiple ways. Search Google, search Reddit, read posts in their entirety when you find something that fits. If something seems valuable, bookmark it. Try to keep the bookmarks organized from the get-go; it'll be easier on you than once you've got 100+ bookmarks to scroll through just to find a list of processors.

2. **Sleep On It.** Maybe not literally, but do NOT make snap decisions, especially when you're buying something that you've no experience with. Think it over, think out how you might want to use the item you're looking at, and see if you can find someone else who did it. Post a question if you can't find the answer on your own, or if you can't find someone doing the same thing with the same piece of equipment. 

3. **Check The Knowledge Sources.** Specifically, once you've got a few links to look through, double check them before you make a purchase. Obviously there's no point in checking, say, a thread about LSI storage adapters if you're on the prowl for a gigabit switch, but check anything relevant. Even if you think you know it, check it again anyhow. Also, check out [LabGopher](https://labgopher.com) which can help you sift through all those eBay listings to find what you want and also whether it's a good deal. 

Here are a few links that I've found handy over time in research:

1. [ServeTheHome.com's LSI Megathread](https://forums.servethehome.com/index.php?threads/lsi-raid-controller-and-hba-complete-listing-plus-oem-models.599/): This thread lists all LSI chipset-based cards by chipset, including OEM listings (so, which chipset the Dell PERC H200 uses, etc.)

2. [Wikipedia List of Xeon Microprocessors](https://en.wikipedia.org/wiki/List_of_Intel_Xeon_microprocessors): It's rather hard to overstate how valuable this is. Learn what the features of each processor type are. The name of the processor is generally a link to the Intel Ark database, which will list the majority of features you would want to know about.

3. [Wikipedia List of Dell PowerEdge Servers](https://en.wikipedia.org/wiki/List_of_Dell_PowerEdge_Servers): This is a handy reference to get an idea of what generation of server is named in which manner. There's some fairly logical naming conventions for Dell servers, and this list is a great way to double-check your assumptions.

4. [Intel Product Specifications Search](https://ark.intel.com/content/www/us/en/ark.html): This is very useful for understanding the differences between Intel processors/products and provides the ability to search for processors/products by specification. So if you are looking for the Xeon processors that have integrated video circuitry or if the NUC (Next Unit of Computing) you found on eBay has the features to support an installation of PFSense. 

5. [AMD Product Specifications Search](https://www.amd.com/en/products/specifications): Has same utility as #4 except for AMD processors/products.

If anyone has a list of HP Proliant servers, please let me know. Their naming structure is also fairly logical, but the Wiki entry for them is rather badly formatted. 

**************************************************************

## Part 2: Understanding Your Use Case

Okay, so what does that even mean? Well, what are you here for? I wandered my way in here for more information on servers. I'm a network engineer, and my lab for the first year or two consisted entirely of Cisco gear; a pair of routers, 5 switches, lots of ethernet cables, and a linux box that was my media fileserver, but it was convenient to stick my TACACS+ authentication server daemon on. My goal was to (finally, after about 8 years) finally wrap up and pass my CCNP certification. That was my Use Case. A rack server was just silly, why would I want to get that?

Then I went to [The MIT Flea](http://swapfest.us), and while wandering around found a 1U rack server for $50. I was looking for a more powerful system by that point, and RACK SERVER. Enterprise > Consumer every time, right? Well, not really. I still have that 1U rack server, and I never turn it on. Because it's LOUD. The other part of the use case at the time was, my office is on the second floor of our house, but it's a loft of sorts, overlooking the family room. Bad enough when I had all the switches and both routers going; this sounded like a B-52 idling at the flight line. (Grew up next to an air force base full of 'em. I know of what I speak. 8 engines. Loud.)

So your use case is kind of like the old high school journalism class: who, what, when, where, why.

**Who:** Who is this impacting? Is it just you? Your parents, siblings, spouse, children? If you're messing around with access lists on your router, and you lock yourself out of it, does it lock everyone else out of the internet? If you reboot your VM host, how many services that other members of your household use will be impacted? This is about both how reliable your gear is and whether or not you want your homelab intermingling with your home network. The answer isn't always "no" to that last part. Sometimes, the best way to learn about networking with Cisco gear is to run your connection on it, and have the rest of the house get pissed because you broke something. Great imitation of an outage in a corporate environment.

**What:** What are you actually buying? Does it meet your requirements for whatever you're doing? Is there an alternative that can be had for cheaper but (and this is critical) does the job correctly? Allow me to tell you my tale of woe. When I got my second server (also at MIT Flea, only this time it was newer and cost $100), it had no RAID card in it. It had a 6-bay drive cage, but there were only two SATA ports on it. As this was going to run alongside the first, I couldn't just use the card from the first, and running from the motherboard headers didn't do anything. The other card was also SATA, and the 6-bay cage was a SAS Expander, so they wouldn't work together anyhow.

In an attempt to fix this, I ordered an LSI 8308ELP for $25 which wouldn't see drives larger than 2TB (of which I had three), a replacement $60 IBM M5014 (LSI 9260-8i) which saw larger drives, but was a RAID only and I couldn't use my existing disks without losing data, and finally a new 6-bay cage for $60 that had 1-to-1 ports instead of a SAS expander, that would work with a $15 SATA-only RAID card that sees large drives. With shipping, I spend $100 on the wrong stuff because I failed to research. Make SURE the item actually does what you need it to, and you won't have to make a $100 mistake to learn the lesson.

**When:** Is this the right time to be buying it? Are you going to be using it soon, or is it an incredible deal that you just have to get before you lose the chance? (Hint: Sometimes, this is true. Other times, you're turning into a packrat/hoarder. Walk the line carefully.) Do you need it right now? I was preparing to buy a bunch of hard drives to replace some failed disks last week. I ended up buying a Dell R710 server, and halving my budget for hard drives. It was a good deal, but I didn't actually *need* it then.

Related to this is the Buy It Now button on eBay. If you CAN be patient, auctions are the way to go. Buy It Now is convenient for little things, and when you know what you want and (within reason) aren't worried about the price. But the real deals and the bargain hunting almost always ends up being waiting on auctions. If you're on a tight budget and you have time to spare, shop the auctions and stay away from the Buy It Now.

**Where:** There's a couple of aspects to this. One, plan where you're going to put it. If it's an expansion card, or a new drive, what machine is it going in? If a server, where are you going to plug it in? Are you going to mount it in a rack? Build an Ikea rack, like the [Lack Rack](https://wiki.eth0.nl/index.php/LackRack)?

Also, Where are you going to buy it? If budget is tight, shop aggressively. I almost spent $15 on a cable today, for connecting an optical drive in a Dell R710. In my cart on Amazon, Prime shipping, ready to go. On a whim, I hit eBay, and the manufacturer of the cable in my Amazon cart was selling the same cable (as New Other) for a whopping $1.50. Shop Craigslist, shop eBay, shop Amazon. If you've got flea markets in your area, consider checking them out. Look for Ham Radio swapfests; Hams and homelabbers have a lot in common, even if we're not using vacuum tubes anymore and they are.

**Why:** Why are you buying whatever it is you're buying? What are your goals overall, and how does this purchase advance them? Are you studying for an exam, and if so does this help that, or is it tangential to what you're doing now? For example, if you're buying a PCIe SATA card because you just picked up a couple of hard drives and don't have any SATA slots available, but you're studying for your Cisco certification, what help is that? (Note: If the reason is "Because my wife ran out of hard drive space from all her television shows, movies, and pictures and I need more storage ASAP", that *is* a help. It means you spend less time trying to weed out useless stuff and more time studying. Usually. And then there's the whole "Happy wife, happy life" thing.)

**************************************************************

## Part 3: If The Price Is Right, The Hardware Might Not Be.

This is where we suggest items that you probably won't want to buy. I saw a post the other day in /r/homelab where someone said "I just bought this server to start my homelab, what does everyone think?" It was a Dell server that is so old, it doesn't support virtualization. It was, in fact, old enough to be in middle school. The guy spent $130 (free shipping fortunately) and can probably get about a quarter of that at a scrapyard. It's a monstrous 4U beast that will scream every time you turn it on and gobble power like nobody's business. For an extra $50 shipping, he could've gotten a (admittedly, somewhat low-end) Dell R710 which is smaller, quieter, far less power hungry and yet far more capable.

I point this out not to pound the poor guy into the ground (and I sincerely hope he was able to cancel the order; the seller should be ashamed of selling it as if it were a modern system, to the point of saying it has a 3 year warranty) but to point out that if you don't research, ask around, and make sure of what you're getting, you could end up getting Pentium 4-era Xeons that are practically worthless too, without even knowing it. To a lesser extent, this is what happened to me, as well.

So here we are in no particular order:

**Servers:** Stay away from pretty much anything that uses DDR2 memory. Yes, the memory is cheaper than dirt, and yes, the machines will even perform okay for you. However, the last generation of DDR2 servers (which are contemporaries of the Core 2 Duo/Quad series processors) are lacking in features, cost more to run, and frequently are hotter and louder to run as well. This includes (but isn't limited to) any Dell PowerEdge 1950 or 2950 (or older), or any HP Proliant labeled G5 or older. Dell x10 servers (R710, R610, T310, etc) or HP Proliant G6 or G7 are (as of January 2016) probably the sweet spot. Also, for more on servers see /u/MonsterMufffin's [Server Buying Guide](https://www.reddit.com/r/homelab/wiki/hardware/muffinsguide). 

**Processors:** Sadly, at this point in time, you really only have Intel processors as an option for enterprise-level gear. Prior to Epyc, AMD has either had no server processors to speak of, or they were so bad it wasn't worth the minor cost savings. Hopefully this changes when Epyc servers will start hitting the market. Please do be aware that Epyc Servers can come with vendor locked CPUs. It depends on whether or not the PSB fuses have been blown or not. ServeTheHome did [a piece on it](https://www.servethehome.com/amd-psb-vendor-locks-epyc-cpus-for-enhanced-security-at-a-cost/). When shopping for Xeons, you want to avoid anything from before the Broadwell era. Check Intel Ark; if it has support for DDR4 memory, it's likely a new enough purchase. If you're going to be doing virtualization of any kind, make sure it supports VT-x (virtualization extensions) and VT-d (Hardware passthrough to VMs). Look for "VT-x with EPT" if you want to do nested Virtualization (such as ESXi VMs on an ESXi host.) There are also server grade Atoms out now, which make excellent NASes or pfSense/Sophos routers, but identifying them is a bit trickier. Do your research! Also, any Xeon that has E3- or E5- at the front of it is almost certainly new enough, but make sure it supports the features you need (including the max number of processors). 

**RAM, ECC, and Registered DIMMs:** This is long and hard, so I won't go into deep details. Servers are almost always going to need ECC (Error Correcting Code) RAM, and ECC will almost never work in standard desktops. Amongst ECC, there are Unbuffered and Registered DIMMs (UDIMMs and RDIMMs). These should never be mixed. Also, if boards accept UDIMMs, they will likely accept a lot less capacity when they do, so do your homework before you buy more memory!!! If your server is running and has memory it came with, get the model number off the sticker on your memory and find more of that.

/u/frazell posted this [excellent addition for RAM information](https://www.reddit.com/r/homelab/comments/44f87k/the_new_homelabbers_guide_to_buying_used_gear_or/d3002h0), which I will sum up here stealing liberally from his comment: 

 *UDIMM: Unbuffered DIMM memory which means there is no buffer chip between the memory chip and the memory controller which requires a higher electrical load and will reduce the number of slots you can use.* (Note: Usually displayed as PC3-10600**E** for ECC Unbuffered, and PC3-10600**U** for non-ECC/Desktop RAM.)

 *RDIMM: Registered DIMM memory which has a buffer chip between the memory controller and memory which will allow you to populate more slots (all as long as you aren't using quad rank memory).* (Note: Usually displayed as PC3-10600**R** on the sticker. There is no non-ECC registered memory.)

 *LRDIMM: Load Reduced DIMM: Has a chip to offload the work of dealing with the additional impact of quad rank memory on the memory controller. As a result, Quad Rank LDRIMM memory is treated the same as Dual Rank RDIMM memory allowing all slots on the server to be populated at the highest density.* (Note: Usually displayed as PC3-10600**L** on the sticker.)

 *You can't mix memory of different types, but you can mix different ranks depending on what your board will allow.*

**DIMM Ranks:** Also from /u/frazell's comment linked above is this information on DIMM Ranks. *"Rank refers to how many 64bit wide data chips the memory has. Most memory is dual rank which means there is memory chips on both sides of the RAM and there are 2 64bit wide data buses. In order to pack in higher density RAM at a lower cost you also have quad rank RAM which packs twice the memory chips across the same 64bit data bus. This puts an extra load on the memory controller so quad rank RAM will usually limit your ability to fully populate slots."* 

You will see this displayed on RAM as '1Rx4' or '2Rx8'; the first digit is the single or dual indicator. As an example of why this matters, Dell R710s have 3 slots per memory channel but can only be populated with a max of 8 ranks, and any Quad-Rank chips must be the first stick in the channel. So it has 18 RAM slots, but if all your RAM is quad-rank, the maximum you can use is 12 slots. Ranks *CAN* be mixed, though, so you could have a Quad and two Dual rank sticks per channel and be okay. 

Note that some chipsets (like the Intel 3420, which supports LGA1156 processors like the Xeon L3426 or X3430, will ONLY take "x8" sticks of RAM. This may be a limitation of the Supermicro board that I have it on (X8SIL-F), or it may be related to the chipset regardless of board manufacturers. Do your homework and when you can, check Memory QVLs for compatible RAM.

**Software vs. Hardware RAID:** Wait, what? Yeah, this needs to be discussed. Each one has it's advantages and disadvantages, and you need to know about them. In broad terms, if you have Hardware RAID and your controller dies, you need a replacement of preferably the same card, and if not then a newer one from the same manufacturer to have any hope of easily recovering it. If you want to do software RAID, you need something that passes the disk to the operating system untouched; this is usually called an HBA, but some RAID cards are capable of it as well (although you might need to flash firmware to change it). Note if you search for an HBA, you're probably going to get external SAS and FibreChannel HBAs; there are internal ones as well. See the LSI megathread, and look for "IT Mode" or "JBOD" for a given chipset. In terms of which to pick - software or hardware - this is on the order of "coke or pepsi"; it's a matter of preference and religious wars have been known to be sparked over less. Note, if you just want your hard drives to "show up" like a regular computer, you want an HBA.

**SAS vs. SATA:** The biggest thing to remember is that you can use a SATA drive with a SAS controller, but NOT vice versa. If you have a rack case with multiple drive bays at the front, you probably have a SAS expander backplane and will need a SAS RAID or HBA card. If you've got one SATA connector for each drive bay on your backplane, you can get SATA cards. SAS (and some SATA) cards have SFF-8087 headers, and will sometimes use breakout cables that give you four standard SATA data cable ends on the other end. Be advised there are **forward** and **reverse** breakouts. Reverse go from a single backplane connector to four motherboard ports, forward (sometimes called regular) go from one RAID controller/HBA connector to four drive bays or backplane ports. They are NOT interchangeable, so order carefully. Final note: External SAS is to connect a chassis full of drives back to a host; make sure if you're buying for a single server you get one with enough INTERNAL ports for your needs. 

**For Further RAID info:** Please see [this excellent writeup](https://www.reddit.com/r/homelab/comments/44f87k/the_new_homelabbers_guide_to_buying_used_gear_or/czqc93y) in the comments regarding SAS, SATA, and other Enterprise RAID information posted by /u/Entropy. 

**Hard Drive Capacity and RAID/HBA cards:** This can be critical. Not only do you need to get an HBA or RAID controller depending on Software or Hardware RAID, a SAS or SATA depending on hardware backplanes, but you need to basically decide Old vs. New. Older cards will have a 2.2TB maximum limit. They simply can't see anything more than that. If you have a 3TB drive, you're either going to see 2.2TB of it or 800GB of it, depending on how the controller behaves. MOST of the cards that can't do it can't be flashed to do it either; it's a limitation in the silicon for the card. Some cards are capable of flashing firmware to allow full access (the 3Ware 9650SE cards can, but they're SATA only), but they're fairly rare and most will have been flashed already. Note that there's nothing wrong with using an older card if you're never going to put anything in it over 2TB per disk; I'm using one with 6 2TB disks in RAID6 right now.

**Network Gear vs. Network Lab:** One of the neat things about Homelabbing is that what a network engineer like me needs is not what a guy studying for MCSA or RHCSA certs is going to need. Clearly define your needs for networking gear. You're probably going to want gigabit ethernet at minimum if you're doing network-based storage of any kind. You probably do NOT need full-on managed switches and enterprise routers unless you're working on learning networking. You probably DO want to make sure anything you get has VLAN capabilities, just in case. This usually means at least a smart switch. Keep in mind when posting questions about your network gear that you need to qualify it; I've got (or at least can find) a use for a Cisco 4507R, which is an 11U chassis switch. Someone learning Hyper-V or ESXi almost certainly doesn't.

**Network Lab - Routers:** This is going to be heavily dependent on what your goals are. If you're going for Cisco certs, then you want Cisco gear, Juniper certs then Juniper gear. I'm a Cisco guy, and Cisco still owns 60+% of the market, so I'll go with that. For routing, a majority of your work through the CCNA and a good chunk of the CCNP can be done in a virtual environment. 

The Big 3 are [GNS3](https://www.gns3.com/), [Cisco VIRL](http://virl.cisco.com/), and [EVE-ng](http://www.eve-ng.net/), which is a successor to UNetLab (itself a successor to IOUWeb). (**PLEASE NOTE:** Cisco's VIRL is NOT free, and runs $80 (academic) or $200-300 per YEAR, whereas the others are free. I list it because it's really a great product, and it handles switching relatively well. UNetLab can do switching as well, but requires IOS images of a questionable provenance.) If you get Cisco Packet Tracer (which is now [freely available on Cisco's website](https://www.netacad.com/about-networking-academy/packet-tracer/)), that will work for CCENT/CCNA all on it's own; to really go deep go for one of the others. 

That said, hardware has it's uses, and can be fun. You want to avoid Cisco 26xx and 25xx routers in general, and most of the 3-digit routers (88x and 89x excluded) simply because of their age; you really want IOS 15 for routers. Cisco 1841s tend to be cheap, plentiful, and cover anything you'd need for labwork - including setting up T1s between your routers.

**Network Lab - Switches:** Switching is a different story; there's not much different from IOS 12.2 to IOS 15 and IOS 15 switches are decidedly on the expensive side. They are also devilishly hard to emulate, because they do so much of their job in silicon. If you have to get just one piece of hardware, make it a switch. You will likely want a Layer 3 switch at some point, and they can double as routers (except for zone-based firewalling and NAT), which can be a huge help in a lab environment. 

You want to avoid ANY switch with "XL" in the name (2924XL, 2948XL, 3524XL, 3548XL) because they handle VLANs fairly differently which is a LARGE part of switching, and a few other details are different as well. Likewise, avoid IOS 12.1 and earlier, as well as CatOS. This means 2950s, which are literally $40 shipped for a stack of 3, are only limited use. They will require crossover cables as well. 3550s are about as old as you want to go, and even then a 3560 isn't much more. For a pure lab environment, stick with FastEthernet 10/100 switches; if you want to run your lab as your core home network, look at gigabit switches. 

Note that Cisco 3560E and 3750E switches are gigabit with a pair of 10G ports (and stackable, in the case of the 3750Es), and can usually be found in the $100-200 range depending on ports. The reason for this is because they use universal images with licenses - you're basically stuck with what you get. What you get though is a Layer 3 switch with 10G ports that will do OSPF and EIGRP on IOS 15, so don't turn your nose up. They do tend to be a bit louder than even regular 3560s, so don't buy these expecting them to go in your living room.

**Network Gear:** When it comes to network gear to support your servers, there's a ton of options out there. If you go the build-your-own route with pfSense, Untangle, Sophos, IPFire, or some other free or open source firewall/router, be sure that whatever network cards you're using are supported by your chosen OS. (Realtek cards are notorious for slowness/problems under pfSense, for example.) Most home routers are going to give you headaches unless you flash them over to OpenWRT, DD-WRT, or something similar to those. Stay away from "dumb" switches, as they may or may not support VLANs, and you'll almost certainly want that at some point. 

**Network cards:** For servers it's usually recommended to stay away from Realtek and stick with Intel (or occasionally Broadcom); Realtek will usually work fine but they do have some compatibility issues, especially with BSD-based systems (pfSense, FreeNAS). Look for dual-port or quad-port server adapters for your gear if you need more ports; for Intel adapters, if you have a choice between Pro 1000/PT and Pro 1000/VT adapters, take the /VT as they're newer, and the PTs have occasional driver issues. 

For 10-Gig Ethernet, switches are going to basically require a managed switch, but you can get a couple of Mellanox ConnectX2 cards and a Twinax cable to do direct-connect between two systems for maybe $50, so don't limit yourself to gigabit. Note that the Quanta LB6M is a 24-port SFP+ 10GbE switch - yes, that's 24 10-gig ports! - for under $300 shipped with some patience. The nature of 10-Gig is such that these will be loud and power hungry, but a 10-gig-only Lab is now possible for reasonable pricing.

**Wireless Devices:** Getting a USB wireless adapter and plugging it in to your pfSense firewall is a recipe for disaster. The majority of USB (or even PCIe) wifi adapters are designed to deal with one connection at a time. You will be better off taking a home router, dropping it into AP mode, and connecting it to your firewall via ethernet than buying a wifi adapter for it. If you want something a little more professional, Ubiquiti makes fairly good gear. If you're doing Network Lab, used Cisco APs are cheap, but make sure you can flash them to standalone mode, or you have access to a WLAN controller, or you won't be able to use it. Cisco does have a virtual WLAN controller that will run under ESXi that I believe is a free-for-evaluation thing.

*************************************************************

Hopefully this will be helpful for folks new to the hobby. If it saves just one new guy from dropping $300 on a server that's no good, my job is done. :)

## Other Resources

### [Muffin's Server Guide](https://www.reddit.com/r/homelab/wiki/hardware/muffinsguide)
### [LabGopher](https://labgopher.com)
